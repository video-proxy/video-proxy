<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Player via Proxy</title>
</head>
<body>
  <h2>Video Player (Proxy Mode)</h2>

  <video id="video" controls autoplay width="100%">
    <source id="src" type="video/mp4">
    Browser ของคุณไม่รองรับ video tag
  </video>

  <script>
    // ดึงค่าจาก query string เช่น ?token=...
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get("token");

    if (token) {
      const proxyUrl = `/api/proxy?token=${encodeURIComponent(token)}`;
      document.getElementById("src").src = proxyUrl;
      document.getElementById("video").load();
    } else {
      document.body.innerHTML = "<p style='color:red;'>❌ Missing token parameter</p>";
    }
  </script>
</body>
</html>
